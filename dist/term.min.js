"use strict";var inheritsFrom=function(t,e){t.prototype=Object.create(e.prototype)},termCmd=function(){};termCmd.prototype.execute=function(){};var HTMLCmd=function(t){this.txt=t},RemoveCmd=function(t){this.tag=t},BuiltInCmd=function(t){this.command=t},CompositeCmd=function(t,e){this.name=t,this.cmdList=[],this.cmdList.push(e)};inheritsFrom(HTMLCmd,termCmd),inheritsFrom(RemoveCmd,termCmd),inheritsFrom(BuiltInCmd,termCmd),inheritsFrom(CompositeCmd,termCmd),HTMLCmd.prototype.execute=function(){add_to_div("<br>"+this.txt)},BuiltInCmd.prototype.execute=function(){this.command()},RemoveCmd.prototype.execute=function(){var t=$("cmd[remove-cmd='"+this.tag+"']");console.log(t),t.remove()},CompositeCmd.prototype.execute=function(){for(var t=0,e=this.cmdList.length;t<e;t++)this.cmdList[t].execute()};
"use strict";function load(e){for(var t=document.getElementById("term_area"),n=document.getElementsByTagName("body"),r=document.getElementsByTagName("cmd"),a=0,d=r.length;a<d;a++){var o=r[a].getAttribute("name"),i=r[a].getAttribute(remove_attr),s=new HTMLCmd(r[a].innerHTML);o||(o=a+""),i&&(cmds[i]=new RemoveCmd(i),s=new HTMLCmd("<cmd "+remove_attr+"="+i+">"+r[a].innerHTML+"</cmd>")),cmds[o]=new CompositeCmd(o,s)}cmds.version=new BuiltInCmd(version),cmds.help=new BuiltInCmd(ayuda),cmds.clear=new BuiltInCmd(clear),t.innerHTML="",add_to_div(t.getAttribute("welcome")),prompt=endline+e,add_prompt(),setInterval(function(){blinker()},500),t.addEventListener("click",setInFocus,!1),n[0].addEventListener("click",setOutOfFocus)}function setInFocus(){inFocus=!0,$("#term_area").focus()}function setOutOfFocus(e){"term_area"==e.target.id?setInFocus():inFocus=!1}function nada(){}function add_to_div(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];t?$("#term_area").append(e):$("#term_area").append("<span>"+e+"</span>")}function update_cmd(e){void 0!=e&&(cmd=e,$("#term_area "+cmd_text_tag+":last-child").html(cmd))}function add_prompt(){add_to_div(prompt),add_to_div("<"+cmd_text_tag+"></"+cmd_text_tag+">",!0)}function resume(){window.open("http://www.farazoman.com/files/cur_resume.pdf","_blank")}function error(){add_to_div(errmsg),ayuda()}function turnOffBlinker(){backspace(!0),blinkerOn=!1}function blinker(){var e="";inFocus?(blinkerOn?turnOffBlinker():(e+="<blink>|</blink>",blinkerOn=!0),add_to_div(e,!0)):turnOffBlinker()}function add_to_hist(e){""!=e&&cmd_history.unshift(e),hist_pos=0,console.log(cmd_history)}function backspace(e){blinkerOn&&e&&($("#term_area blink:last-child").remove(),blinkerOn=!1),0==cmd.length||e||($("#term_area blink:last-child").remove(),update_cmd(cmd.substring(0,cmd.length-1)))}var prompt="",cmds={},version_="webterminal v0.3.0",errmsg="</br></br><div id='err'>Sorry</div> that is not valid command, refer to the valid commads below.",version_info="</br></br>"+version_+"</br>This version is still in beta with many features still to be implemented. Source code can be viewed <a target='_blank' href='http://www.github.com/farazoman/terminal_webapp'>here</a></br>",cmd="",endline="</br>",blinkerOn=!1,inFocus=!1,remove_attr="remove-cmd",cmd_history=[],hist_pos=0,cmd_text_tag="cmd_text",version=function(){add_to_div(version_info)},clear=function(){var e=document.getElementById("term_area");e.innerHTML=""},ayuda=function(){var e="</br></br><u>The available commands are:</u>";for(var t in cmds)e+=endline,e+=t;add_to_div(e)};document.addEventListener("keypress",function(e){var t=document.getElementById("term_area");if(inFocus){if(13==e.keyCode){backspace(!0),console.log(cmd),add_to_hist(cmd);try{cmd?cmds[cmd].execute():nada()}catch(e){console.log(e.message),error()}backspace(!0),cmd="",add_prompt()}else if(38!=e.keyCode&&40!=e.keyCode){var n=String.fromCharCode(e.keyCode);turnOffBlinker(),update_cmd(cmd+=n)}t.scrollTop=t.scrollHeight}});var isUp=!1;window.addEventListener("keydown",function(e){var t;switch(e.keyCode){case 37:break;case 38:hist_pos<cmd_history.length&&hist_pos>=0&&(turnOffBlinker(),update_cmd(cmd_history[hist_pos]),console.log(cmd_history[hist_pos]),hist_pos+=1,isUp=!0);break;case 39:break;case 40:hist_pos-=1,isUp&&(isUp=!1,hist_pos-=1),hist_pos<0?(t="",hist_pos=0):t=cmd_history[hist_pos],turnOffBlinker(),update_cmd(t)}},!1),$(document).unbind("keydown").bind("keydown",function(e){var t=!1;if(8===e.keyCode||38===e.keyCode||40===e.keyCode){var n=e.srcElement||e.target;t=("INPUT"!==n.tagName.toUpperCase()||"TEXT"!==n.type.toUpperCase()&&"PASSWORD"!==n.type.toUpperCase()&&"FILE"!==n.type.toUpperCase()&&"EMAIL"!==n.type.toUpperCase()&&"SEARCH"!==n.type.toUpperCase()&&"DATE"!==n.type.toUpperCase())&&"TEXTAREA"!==n.tagName.toUpperCase()||(n.readOnly||n.disabled),8===e.keyCode&&(backspace(!1),turnOffBlinker())}t&&e.preventDefault()});